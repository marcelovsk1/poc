<!DOCTYPE html>
<html>
  <head>
    <title>My App - Windows XP Style</title>
    <style>
      /* Fundo geral da página */
      body {
        font-family: "Tahoma", sans-serif;
        background: linear-gradient(to bottom, #134837, #b4d3f0);
        margin: 0;
        padding: 20px;
        color: #000;
      }

      /* Estilo dos títulos */
      h1 {
        background-color: #3a6ea5;
        color: white;
        padding: 10px;
        border-radius: 8px;
        text-align: center;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
      }

      h3 {
        margin-bottom: 10px;
        color: #3a6ea5;
      }

      /* Container de formulários */
      form {
        background-color: #ffffff;
        border: 1px solid #a9a9a9;
        border-radius: 10px;
        padding: 20px;
        margin-bottom: 20px;
        box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.2);
      }

      label {
        font-size: 14px;
        color: #000;
      }

      input, button {
        font-family: "Tahoma", sans-serif;
        margin: 5px 0;
        padding: 8px;
        border: 1px solid #a9a9a9;
        border-radius: 5px;
        width: 100%;
        box-sizing: border-box;
      }

      input:focus {
        outline: none;
        border: 1px solid #3a6ea5;
        box-shadow: 0 0 5px rgba(58, 110, 165, 0.5);
      }

      button {
        background-color: #3a6ea5;
        color: white;
        font-size: 14px;
        cursor: pointer;
        border: none;
      }

      button:hover {
        background-color: #2d5894;
      }

      /* Estilo da lista de usuários */
      ul {
  list-style-type: none; /* Remove os marcadores padrão */
  padding: 0;
}

li {
  display: flex; /* Organiza o conteúdo em linha */
  justify-content: space-between; /* Botão "Deletar" vai para o canto direito */
  align-items: center; /* Alinha verticalmente o texto e o botão */
  background-color: #f9f9f9; /* Fundo claro para destaque */
  padding: 10px;
  margin-bottom: 5px;
  border-radius: 5px;
  border: 1px solid #ddd; /* Borda discreta */
}

      ul ul {
        background-color: #f1f1f1;
        padding: 10px;
        border: 1px solid #a9a9a9;
        border-radius: 8px;
      }

      hr {
        border: none;
        border-top: 1px solid #a9a9a9;
        margin: 20px 0;
      }
    </style>
  </head>
  <body>
    <h1>Adicionar Novo Usuário</h1>
    <form action="/new_user" method="post">
        <label for="name">Nome:</label>
        <input type="text" id="name" name="name" required>

        <label for="email">Email:</label>
        <input type="email" id="email" name="email" required>

        <label for="password">Senha:</label>
        <input type="password" id="password" name="password" required>
        

        <h3>Endereço Principal</h3>
        <label for="street">Rua:</label>
        <input type="text" id="street" name="street" required>

        <label for="number">Número:</label>
        <input type="text" id="number" name="number" required>

        <label for="complement">Complemento:</label>
        <input type="text" id="complement" name="complement">

        <label for="zip_code">CEP:</label>
        <input type="text" id="zip_code" name="zip_code" required>

        <label for="city">Cidade:</label>
        <input type="text" id="city" name="city" required>

        <label for="state">Estado:</label>
        <input type="text" id="state" name="state" required>

        <button type="submit">Criar Novo Usuário</button>
    </form>

    <h1>Adicionar Novo Endereço</h1>
    <form action="/new_address" method="post">
        <label for="name">Nome do Usuário:</label>
        <input type="text" id="name" name="name" required>

        <label for="street">Rua:</label>
        <input type="text" id="street" name="street" required>

        <label for="number">Número:</label>
        <input type="text" id="number" name="number" required>

        <label for="complement">Complemento:</label>
        <input type="text" id="complement" name="complement">

        <label for="zip_code">CEP:</label>
        <input type="text" id="zip_code" name="zip_code" required>

        <label for="city">Cidade:</label>
        <input type="text" id="city" name="city" required>

        <label for="state">Estado:</label>
        <input type="text" id="state" name="state" required>

        <button type="submit">Adicionar Novo Endereço</button>
    </form>

    <h1>Usuários Cadastrados</h1>
    <ul>
        {% for user in users %}
            <li><strong>ID:</strong> {{ user.id }}</li>
            <li><strong>Nome:</strong> {{ user.name }}</li>
            <li><strong>Email:</strong> {{ user.email }}</li>

            <li><strong>Endereço Principal:</strong></li>
            <ul>
                <li>{{ user.street }}, {{ user.number }} - {{ user.complement or "N/A" }}, {{ user.city }}/{{ user.state }} - CEP: {{ user.zip_code }}</li>
            </ul>

            <li><strong>Endereços Adicionais:</strong></li>
            <ul>
              {% for address in user.addresses %}
                  <li>
                      {{ address.street }}, {{ address.number }} - {{ address.complement or "N/A" }}, {{ address.city }}/{{ address.state }} - CEP: {{ address.zip_code }}
                      <form action="/delete_address/{{ address.id }}" method="post" style="display: inline;">
                          <button type="submit">Deletar</button>
                      </form>
                  </li>
              {% else %}
                  <li>Sem endereços adicionais cadastrados.</li>
              {% endfor %}
          </ul>          
            <hr>
        {% endfor %}
    </ul>
  </body>
</html>

<script>
  function mascaraCPF(campo) {
    // Remove tudo que não for número
    campo.value = campo.value.replace(/\D/g, "")
                             .replace(/(\d{3})(\d)/, "$1.$2")
                             .replace(/(\d{3})(\d)/, "$1.$2")
                             .replace(/(\d{3})(\d{1,2})$/, "$1-$2");
  }

  function mascaraCEP(campo) {
    // Remove tudo que não for número
    campo.value = campo.value.replace(/\D/g, "")
                             .replace(/(\d{5})(\d)/, "$1-$2");
  }
</script>

